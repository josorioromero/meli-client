{
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server\",\"filename\":\"/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/index.js\",\"targets\":{\"android\":\"4.4.3\",\"chrome\":\"49.0.0\",\"edge\":\"89.0.0\",\"firefox\":\"87.0.0\",\"ie\":\"11.0.0\",\"ios\":\"12.2.0\",\"opera\":\"73.0.0\",\"safari\":\"8.0.0\",\"samsung\":\"13.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server",
      "filename": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/index.js",
      "targets": {
        "android": "4.4.3",
        "chrome": "49.0.0",
        "edge": "89.0.0",
        "firefox": "87.0.0",
        "ie": "11.0.0",
        "ios": "12.2.0",
        "opera": "73.0.0",
        "safari": "8.0.0",
        "samsung": "13.0.0"
      },
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/index.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _nodeFetch = _interopRequireDefault(require(\"node-fetch\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nvar _app = _interopRequireDefault(require(\"./app\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// @vendors and setup\nif (!global.fetch) {\n  global.fetch = _nodeFetch.default;\n}\n\nconst result = _dotenv.default.config();\n\nif (result.error) {\n  throw result.error;\n} // start server\n\n\n_app.default.listen(process.env.PORT, () => {\n  console.log(`App running on port ${process.env.PORT}`);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImdsb2JhbCIsImZldGNoIiwiX2ZlY3RoIiwicmVzdWx0IiwiZG90ZW52IiwiY29uZmlnIiwiZXJyb3IiLCJhcHAiLCJsaXN0ZW4iLCJwcm9jZXNzIiwiZW52IiwiUE9SVCIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiI7O0FBQ0E7O0FBS0E7O0FBT0E7Ozs7QUFiQTtBQUVBLElBQUksQ0FBQ0EsTUFBTSxDQUFDQyxLQUFaLEVBQW1CO0FBQ2ZELEVBQUFBLE1BQU0sQ0FBQ0MsS0FBUCxHQUFlQyxrQkFBZjtBQUNIOztBQUdELE1BQU1DLE1BQU0sR0FBR0MsZ0JBQU9DLE1BQVAsRUFBZjs7QUFDQSxJQUFJRixNQUFNLENBQUNHLEtBQVgsRUFBa0I7QUFDZCxRQUFNSCxNQUFNLENBQUNHLEtBQWI7QUFDSCxDLENBRUQ7OztBQUVBQyxhQUFJQyxNQUFKLENBQVdDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxJQUF2QixFQUE2QixNQUFNO0FBQy9CQyxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBYSx1QkFBc0JKLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxJQUFLLEVBQXBEO0FBQ0gsQ0FGRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvSm9yZ2UuT3NvcmlvL0Rlc2t0b3AvbWVyY2Fkb19saWJyZS9tZWxpLWNsaWVudC9zZXJ2ZXIvc3JjLyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEB2ZW5kb3JzIGFuZCBzZXR1cFxuaW1wb3J0IF9mZWN0aCBmcm9tICdub2RlLWZldGNoJztcbmlmICghZ2xvYmFsLmZldGNoKSB7XG4gICAgZ2xvYmFsLmZldGNoID0gX2ZlY3RoO1xufVxuXG5pbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XG5jb25zdCByZXN1bHQgPSBkb3RlbnYuY29uZmlnKCk7XG5pZiAocmVzdWx0LmVycm9yKSB7XG4gICAgdGhyb3cgcmVzdWx0LmVycm9yO1xufVxuXG4vLyBzdGFydCBzZXJ2ZXJcbmltcG9ydCBhcHAgZnJvbSAnLi9hcHAnO1xuYXBwLmxpc3Rlbihwcm9jZXNzLmVudi5QT1JULCAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coYEFwcCBydW5uaW5nIG9uIHBvcnQgJHtwcm9jZXNzLmVudi5QT1JUfWApO1xufSk7Il19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "global",
        "fetch",
        "_fecth",
        "result",
        "dotenv",
        "config",
        "error",
        "app",
        "listen",
        "process",
        "env",
        "PORT",
        "console",
        "log"
      ],
      "mappings": ";;AACA;;AAKA;;AAOA;;;;AAbA;AAEA,IAAI,CAACA,MAAM,CAACC,KAAZ,EAAmB;AACfD,EAAAA,MAAM,CAACC,KAAP,GAAeC,kBAAf;AACH;;AAGD,MAAMC,MAAM,GAAGC,gBAAOC,MAAP,EAAf;;AACA,IAAIF,MAAM,CAACG,KAAX,EAAkB;AACd,QAAMH,MAAM,CAACG,KAAb;AACH,C,CAED;;;AAEAC,aAAIC,MAAJ,CAAWC,OAAO,CAACC,GAAR,CAAYC,IAAvB,EAA6B,MAAM;AAC/BC,EAAAA,OAAO,CAACC,GAAR,CAAa,uBAAsBJ,OAAO,CAACC,GAAR,CAAYC,IAAK,EAApD;AACH,CAFD",
      "sourceRoot": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/",
      "sourcesContent": [
        "// @vendors and setup\nimport _fecth from 'node-fetch';\nif (!global.fetch) {\n    global.fetch = _fecth;\n}\n\nimport dotenv from 'dotenv';\nconst result = dotenv.config();\nif (result.error) {\n    throw result.error;\n}\n\n// start server\nimport app from './app';\napp.listen(process.env.PORT, () => {\n    console.log(`App running on port ${process.env.PORT}`);\n});"
      ]
    },
    "sourceType": "script",
    "mtime": 1621455112648
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server\",\"filename\":\"/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/app.js\",\"targets\":{\"android\":\"4.4.3\",\"chrome\":\"49.0.0\",\"edge\":\"89.0.0\",\"firefox\":\"87.0.0\",\"ie\":\"11.0.0\",\"ios\":\"12.2.0\",\"opera\":\"73.0.0\",\"safari\":\"8.0.0\",\"samsung\":\"13.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server",
      "filename": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/app.js",
      "targets": {
        "android": "4.4.3",
        "chrome": "49.0.0",
        "edge": "89.0.0",
        "firefox": "87.0.0",
        "ie": "11.0.0",
        "ios": "12.2.0",
        "opera": "73.0.0",
        "safari": "8.0.0",
        "samsung": "13.0.0"
      },
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/app.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/app.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/",
        "sourceFileName": "app.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _compression = _interopRequireDefault(require(\"compression\"));\n\nvar _errorhandler = _interopRequireDefault(require(\"errorhandler\"));\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _morgan = _interopRequireDefault(require(\"morgan\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// @vendors\n// @constants\nconst author = {\n  name: 'Jorge',\n  lastname: 'Osorio'\n}; // app setup\n\nconst app = (0, _express.default)();\napp.use((0, _morgan.default)('common'));\napp.use((0, _compression.default)()); // GET /items\n\napp.get('items', catchUnhandledErrors((req, res) => {\n  let promise;\n\n  if (req.query.q && req.query.q.trim()) {\n    promise = fetch(`${process.env.MELI_SEARCH_SVC}?q=${req.query.q}`).then(response => response.json());\n  } else {\n    promise = Promise.resolve();\n  }\n\n  return promise.then(data => {\n    let categories = [];\n    let items = [];\n\n    if (data) {\n      categories = (data.filters || []).filter(category => category.id === 'category').map(category => category.values.map(value => value.path_from_root.map(path => path.name)).find(() => true)).find(() => true);\n      let results = data.results || [];\n\n      for (let i = 0; i < 4 && i < results.length; i++) {\n        let article = results[i];\n        items.push({\n          id: article.id,\n          title: article.title,\n          price: {\n            currency: article.currency_id,\n            amount: article.available_quantity,\n            decimals: article.price\n          },\n          picture: article.thumbnail,\n          condition: article.condition,\n          free_shipping: article.shipping && article.shipping.free_shipping === true,\n          location: {\n            state: article.address.state_name,\n            city: article.address.city_name\n          }\n        });\n      }\n    }\n\n    res.send({\n      author,\n      categories,\n      items\n    });\n  });\n}));\napp.get('/items/:id', catchUnhandledErrors((req, res) => {\n  return fetch(`${process.env.MELI_PRODUCT_DETAIL_SVC}/items/${req.params.id}`).then(async response => {\n    if (response.status !== 200) {\n      return response.text().then(body => {\n        res.status(response.status).send(body);\n      });\n    } else {\n      return response.json().then(article => {\n        return Promise.all([fetch(`${process.env.MELI_PRODUCT_DETAIL_SVC}/categories/${article.category_id}`).then(response => response.json()), fetch(`${process.env.MELI_PRODUCT_DETAIL_SVC}/items/${article.id}/description`).then(response => response.json())]).then(([category, description]) => [article, category, description]);\n      }).then(([article, category, description]) => {\n        let categories = (category.path_from_root || []).map(path => path.name);\n        let item = {\n          id: article.id,\n          title: article.title,\n          price: {\n            currency: article.currency_id,\n            amount: article.available_quantity,\n            decimals: article.price\n          },\n          picture: article.pictures && article.pictures.length > 0 ? article.pictures[0].url : article.thumbnail,\n          condition: article.condition,\n          free_shipping: article.shipping && article.shipping.free_shipping === true,\n          sold_quantity: article.sold_quantity,\n          description: description.plain_text\n        };\n        res.send({\n          author,\n          categories,\n          item\n        });\n      });\n    }\n  });\n}));\n\nif (process.env.NODE_ENV === 'PROD') {\n  app.use((err, req, res, next) => {\n    console.error(err);\n    res.status(500).send('Error: this project is non intented for production usage');\n  });\n} else {\n  app.use((0, _errorhandler.default)());\n}\n\nfunction catchUnhandledErrors(fn) {\n  return async (req, res, next) => {\n    try {\n      await fn(req, res, next);\n    } catch (err) {\n      await next(err);\n    }\n  };\n}\n\nvar _default = app;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJhdXRob3IiLCJuYW1lIiwibGFzdG5hbWUiLCJhcHAiLCJ1c2UiLCJnZXQiLCJjYXRjaFVuaGFuZGxlZEVycm9ycyIsInJlcSIsInJlcyIsInByb21pc2UiLCJxdWVyeSIsInEiLCJ0cmltIiwiZmV0Y2giLCJwcm9jZXNzIiwiZW52IiwiTUVMSV9TRUFSQ0hfU1ZDIiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsIlByb21pc2UiLCJyZXNvbHZlIiwiZGF0YSIsImNhdGVnb3JpZXMiLCJpdGVtcyIsImZpbHRlcnMiLCJmaWx0ZXIiLCJjYXRlZ29yeSIsImlkIiwibWFwIiwidmFsdWVzIiwidmFsdWUiLCJwYXRoX2Zyb21fcm9vdCIsInBhdGgiLCJmaW5kIiwicmVzdWx0cyIsImkiLCJsZW5ndGgiLCJhcnRpY2xlIiwicHVzaCIsInRpdGxlIiwicHJpY2UiLCJjdXJyZW5jeSIsImN1cnJlbmN5X2lkIiwiYW1vdW50IiwiYXZhaWxhYmxlX3F1YW50aXR5IiwiZGVjaW1hbHMiLCJwaWN0dXJlIiwidGh1bWJuYWlsIiwiY29uZGl0aW9uIiwiZnJlZV9zaGlwcGluZyIsInNoaXBwaW5nIiwibG9jYXRpb24iLCJzdGF0ZSIsImFkZHJlc3MiLCJzdGF0ZV9uYW1lIiwiY2l0eSIsImNpdHlfbmFtZSIsInNlbmQiLCJNRUxJX1BST0RVQ1RfREVUQUlMX1NWQyIsInBhcmFtcyIsInN0YXR1cyIsInRleHQiLCJib2R5IiwiYWxsIiwiY2F0ZWdvcnlfaWQiLCJkZXNjcmlwdGlvbiIsIml0ZW0iLCJwaWN0dXJlcyIsInVybCIsInNvbGRfcXVhbnRpdHkiLCJwbGFpbl90ZXh0IiwiTk9ERV9FTlYiLCJlcnIiLCJuZXh0IiwiY29uc29sZSIsImVycm9yIiwiZm4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUpBO0FBTUE7QUFDQSxNQUFNQSxNQUFNLEdBQUc7QUFDWEMsRUFBQUEsSUFBSSxFQUFFLE9B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Z0MsYUFYaEI7QUFZUEosVUFBQUEsV0FBVyxFQUFFQSxXQUFXLENBQUNLO0FBWmxCLFNBQVg7QUFjQS9ELFFBQUFBLEdBQUcsQ0FBQ2tELElBQUosQ0FBUztBQUNMMUQsVUFBQUEsTUFESztBQUVMdUIsVUFBQUEsVUFGSztBQUdMNEMsVUFBQUE7QUFISyxTQUFUO0FBS0gsT0E5QkUsQ0FBUDtBQStCSDtBQUNKLEdBeENFLENBQVA7QUF5Q0gsQ0ExQ3lDLENBQTFDOztBQTRDQSxJQUFJckQsT0FBTyxDQUFDQyxHQUFSLENBQVl5RCxRQUFaLEtBQXlCLE1BQTdCLEVBQXFDO0FBQ2pDckUsRUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsQ0FBQ3FFLEdBQUQsRUFBTWxFLEdBQU4sRUFBV0MsR0FBWCxFQUFnQmtFLElBQWhCLEtBQXlCO0FBQzdCQyxJQUFBQSxPQUFPLENBQUNDLEtBQVIsQ0FBY0gsR0FBZDtBQUNBakUsSUFBQUEsR0FBRyxDQUFDcUQsTUFBSixDQUFXLEdBQVgsRUFBZ0JILElBQWhCLENBQXFCLDBEQUFyQjtBQUNILEdBSEQ7QUFJSCxDQUxELE1BS087QUFDSHZELEVBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLDRCQUFSO0FBQ0g7O0FBRUQsU0FBU0Usb0JBQVQsQ0FBOEJ1RSxFQUE5QixFQUFrQztBQUM5QixTQUFPLE9BQU90RSxHQUFQLEVBQVlDLEdBQVosRUFBaUJrRSxJQUFqQixLQUEwQjtBQUM3QixRQUFJO0FBQ0EsWUFBTUcsRUFBRSxDQUFDdEUsR0FBRCxFQUFNQyxHQUFOLEVBQVdrRSxJQUFYLENBQVI7QUFDSCxLQUZELENBRUUsT0FBT0QsR0FBUCxFQUFZO0FBQ1YsWUFBTUMsSUFBSSxDQUFDRCxHQUFELENBQVY7QUFDSDtBQUNKLEdBTkQ7QUFPSDs7ZUFFY3RFLEciLCJzb3VyY2VSb290IjoiL1VzZXJzL0pvcmdlLk9zb3Jpby9EZXNrdG9wL21lcmNhZG9fbGlicmUvbWVsaS1jbGllbnQvc2VydmVyL3NyYy8iLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdmVuZG9yc1xuaW1wb3J0IGNvbXByZXNzaW9uIGZyb20gJ2NvbXByZXNzaW9uJztcbmltcG9ydCBlcnJvcmhhbmRsZXIgZnJvbSAnZXJyb3JoYW5kbGVyJztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IG1vcmdhbiBmcm9tICdtb3JnYW4nO1xuXG4vLyBAY29uc3RhbnRzXG5jb25zdCBhdXRob3IgPSB7XG4gICAgbmFtZTogJ0pvcmdlJyxcbiAgICBsYXN0bmFtZTogJ09zb3Jpbydcbn07XG5cbi8vIGFwcCBzZXR1cFxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG5hcHAudXNlKG1vcmdhbignY29tbW9uJykpO1xuYXBwLnVzZShjb21wcmVzc2lvbigpKTtcblxuLy8gR0VUIC9pdGVtc1xuYXBwLmdldCgnaXRlbXMnLCBjYXRjaFVuaGFuZGxlZEVycm9ycygocmVxLCByZXMpID0+IHtcbiAgICBsZXQgcHJvbWlzZTtcbiAgICBpZiAocmVxLnF1ZXJ5LnEgJiYgcmVxLnF1ZXJ5LnEudHJpbSgpKSB7XG4gICAgICAgIHByb21pc2UgPSBmZXRjaChgJHtwcm9jZXNzLmVudi5NRUxJX1NFQVJDSF9TVkN9P3E9JHtyZXEucXVlcnkucX1gKS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gcHJvbWlzZVxuICAgICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgICAgIGxldCBjYXRlZ29yaWVzID0gW107XG4gICAgICAgICAgICBsZXQgaXRlbXMgPSBbXTtcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2F0ZWdvcmllcyA9IChkYXRhLmZpbHRlcnMgfHwgW10pXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoY2F0ZWdvcnkgPT4gY2F0ZWdvcnkuaWQgPT09ICdjYXRlZ29yeScpXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoY2F0ZWdvcnkgPT4gY2F0ZWdvcnkudmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKHZhbHVlID0+ICB2YWx1ZS5wYXRoX2Zyb21fcm9vdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAocGF0aCA9PiBwYXRoLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluZCgoKSA9PiB0cnVlKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKCgpID0+IHRydWUpO1xuXG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdHMgPSBkYXRhLnJlc3VsdHMgfHwgW107XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0ICYmIGkgPCByZXN1bHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhcnRpY2xlID0gcmVzdWx0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogYXJ0aWNsZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBhcnRpY2xlLnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeTogYXJ0aWNsZS5jdXJyZW5jeV9pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGFydGljbGUuYXZhaWxhYmxlX3F1YW50aXR5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY2ltYWxzOiBhcnRpY2xlLnByaWNlXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGljdHVyZTogYXJ0aWNsZS50aHVtYm5haWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25kaXRpb246IGFydGljbGUuY29uZGl0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgZnJlZV9zaGlwcGluZzogKGFydGljbGUuc2hpcHBpbmcgJiYgYXJ0aWNsZS5zaGlwcGluZy5mcmVlX3NoaXBwaW5nID09PSB0cnVlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IGFydGljbGUuYWRkcmVzcy5zdGF0ZV9uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpdHk6IGFydGljbGUuYWRkcmVzcy5jaXR5X25hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgIGF1dGhvcixcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWVzLFxuICAgICAgICAgICAgICAgIGl0ZW1zXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG59KSk7XG5cbmFwcC5nZXQoJy9pdGVtcy86aWQnLCBjYXRjaFVuaGFuZGxlZEVycm9ycygocmVxLCByZXMpID0+IHtcbiAgICByZXR1cm4gZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTUVMSV9QUk9EVUNUX0RFVEFJTF9TVkN9L2l0ZW1zLyR7cmVxLnBhcmFtcy5pZH1gKVxuICAgICAgICAudGhlbihhc3luYyByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGJvZHkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyhyZXNwb25zZS5zdGF0dXMpLnNlbmQoYm9keSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGFydGljbGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5NRUxJX1BST0RVQ1RfREVUQUlMX1NWQ30vY2F0ZWdvcmllcy8ke2FydGljbGUuY2F0ZWdvcnlfaWR9YCkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk1FTElfUFJPRFVDVF9ERVRBSUxfU1ZDfS9pdGVtcy8ke2FydGljbGUuaWR9L2Rlc2NyaXB0aW9uYCkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKFsgY2F0ZWdvcnksIGRlc2NyaXB0aW9uIF0pID0+IChbIGFydGljbGUsIGNhdGVnb3J5LCBkZXNjcmlwdGlvbiBdKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChbIGFydGljbGUsIGNhdGVnb3J5LCBkZXNjcmlwdGlvbiBdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2F0ZWdvcmllcyA9IChjYXRlZ29yeS5wYXRoX2Zyb21fcm9vdCB8fCBbXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKHBhdGggPT4gcGF0aC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpdGVtID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBhcnRpY2xlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBhcnRpY2xlLnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBhcnRpY2xlLmN1cnJlbmN5X2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGFydGljbGUuYXZhaWxhYmxlX3F1YW50aXR5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNpbWFsczogYXJ0aWNsZS5wcmljZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGljdHVyZTogYXJ0aWNsZS5waWN0dXJlcyAmJiBhcnRpY2xlLnBpY3R1cmVzLmxlbmd0aCA+IDAgPyBhcnRpY2xlLnBpY3R1cmVzWzBdLnVybCA6IGFydGljbGUudGh1bWJuYWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbjogYXJ0aWNsZS5jb25kaXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJlZV9zaGlwcGluZzogKGFydGljbGUuc2hpcHBpbmcgJiYgYXJ0aWNsZS5zaGlwcGluZy5mcmVlX3NoaXBwaW5nID09PSB0cnVlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb2xkX3F1YW50aXR5OiBhcnRpY2xlLnNvbGRfcXVhbnRpdHksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnBsYWluX3RleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbn0pKTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnUFJPRCcpIHtcbiAgICBhcHAudXNlKChlcnIsIHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoJ0Vycm9yOiB0aGlzIHByb2plY3QgaXMgbm9uIGludGVudGVkIGZvciBwcm9kdWN0aW9uIHVzYWdlJyk7XG4gICAgfSk7XG59IGVsc2Uge1xuICAgIGFwcC51c2UoZXJyb3JoYW5kbGVyKCkpO1xufVxuXG5mdW5jdGlvbiBjYXRjaFVuaGFuZGxlZEVycm9ycyhmbikge1xuICAgIHJldHVybiBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGZuKHJlcSwgcmVzLCBuZXh0KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBhd2FpdCBuZXh0KGVycik7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBhcHA7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "author",
        "name",
        "lastname",
        "app",
        "use",
        "get",
        "catchUnhandledErrors",
        "req",
        "res",
        "promise",
        "query",
        "q",
        "trim",
        "fetch",
        "process",
        "env",
        "MELI_SEARCH_SVC",
        "then",
        "response",
        "json",
        "Promise",
        "resolve",
        "data",
        "categories",
        "items",
        "filters",
        "filter",
        "category",
        "id",
        "map",
        "values",
        "value",
        "path_from_root",
        "path",
        "find",
        "results",
        "i",
        "length",
        "article",
        "push",
        "title",
        "price",
        "currency",
        "currency_id",
        "amount",
        "available_quantity",
        "decimals",
        "picture",
        "thumbnail",
        "condition",
        "free_shipping",
        "shipping",
        "location",
        "state",
        "address",
        "state_name",
        "city",
        "city_name",
        "send",
        "MELI_PRODUCT_DETAIL_SVC",
        "params",
        "status",
        "text",
        "body",
        "all",
        "category_id",
        "description",
        "item",
        "pictures",
        "url",
        "sold_quantity",
        "plain_text",
        "NODE_ENV",
        "err",
        "next",
        "console",
        "error",
        "fn"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/",
      "sourcesContent": [
        "// @vendors\nimport compression from 'compression';\nimport errorhandler from 'errorhandler';\nimport express from 'express';\nimport morgan from 'morgan';\n\n// @constants\nconst author = {\n    name: 'Jorge',\n    lastname: 'Osorio'\n};\n\n// app setup\nconst app = express();\n\napp.use(morgan('common'));\napp.use(compression());\n\n// GET /items\napp.get('items', catchUnhandledErrors((req, res) => {\n    let promise;\n    if (req.query.q && req.query.q.trim()) {\n        promise = fetch(`${process.env.MELI_SEARCH_SVC}?q=${req.query.q}`).then(response => response.json());\n    } else {\n        promise = Promise.resolve();\n    }\n    return promise\n        .then(data => {\n            let categories = [];\n            let items = [];\n            if (data) {\n                categories = (data.filters || [])\n                    .filter(category => category.id === 'category')\n                    .map(category => category.values\n                        .map(value =>  value.path_from_root\n                            .map(path => path.name)\n                        )\n                        .find(() => true)\n                    )\n                    .find(() => true);\n\n                let results = data.results || [];\n                for (let i = 0; i < 4 && i < results.length; i++) {\n                    let article = results[i];\n                    items.push({\n                        id: article.id,\n                        title: article.title,\n                        price: {\n                            currency: article.currency_id,\n                            amount: article.available_quantity,\n                            decimals: article.price\n                        },\n                        picture: article.thumbnail,\n                        condition: article.condition,\n                        free_shipping: (article.shipping && article.shipping.free_shipping === true),\n                        location: {\n                            state: article.address.state_name,\n                            city: article.address.city_name\n                        }\n                    });\n                }\n            }\n            res.send({\n                author,\n                categories,\n                items\n            });\n        });\n}));\n\napp.get('/items/:id', catchUnhandledErrors((req, res) => {\n    return fetch(`${process.env.MELI_PRODUCT_DETAIL_SVC}/items/${req.params.id}`)\n        .then(async response => {\n            if (response.status !== 200) {\n                return response.text()\n                    .then(body => {\n                        res.status(response.status).send(body);\n                    });\n            } else {\n                return response.json()\n                    .then(article => {\n                        return Promise.all([\n                            fetch(`${process.env.MELI_PRODUCT_DETAIL_SVC}/categories/${article.category_id}`).then(response => response.json()),\n                            fetch(`${process.env.MELI_PRODUCT_DETAIL_SVC}/items/${article.id}/description`).then(response => response.json())\n                        ])\n                        .then(([ category, description ]) => ([ article, category, description ]));\n                    })\n                    .then(([ article, category, description ]) => {\n                        let categories = (category.path_from_root || [])\n                            .map(path => path.name);\n                        let item = {\n                            id: article.id,\n                            title: article.title,\n                            price: {\n                                currency: article.currency_id,\n                                amount: article.available_quantity,\n                                decimals: article.price\n                            },\n                            picture: article.pictures && article.pictures.length > 0 ? article.pictures[0].url : article.thumbnail,\n                            condition: article.condition,\n                            free_shipping: (article.shipping && article.shipping.free_shipping === true),\n                            sold_quantity: article.sold_quantity,\n                            description: description.plain_text\n                        };\n                        res.send({\n                            author,\n                            categories,\n                            item\n                        });\n                    });\n            }\n        });\n}));\n\nif (process.env.NODE_ENV === 'PROD') {\n    app.use((err, req, res, next) => {\n        console.error(err);\n        res.status(500).send('Error: this project is non intented for production usage');\n    });\n} else {\n    app.use(errorhandler());\n}\n\nfunction catchUnhandledErrors(fn) {\n    return async (req, res, next) => {\n        try {\n            await fn(req, res, next);\n        } catch (err) {\n            await next(err);\n        }\n    };\n}\n\nexport default app;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1621455112648
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server\",\"filename\":\"/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/app.js\",\"targets\":{\"android\":\"4.4.3\",\"chrome\":\"49.0.0\",\"edge\":\"89.0.0\",\"firefox\":\"87.0.0\",\"ie\":\"11.0.0\",\"ios\":\"12.2.0\",\"opera\":\"73.0.0\",\"safari\":\"8.0.0\",\"samsung\":\"13.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server",
      "filename": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/app.js",
      "targets": {
        "android": "4.4.3",
        "chrome": "49.0.0",
        "edge": "89.0.0",
        "firefox": "87.0.0",
        "ie": "11.0.0",
        "ios": "12.2.0",
        "opera": "73.0.0",
        "safari": "8.0.0",
        "samsung": "13.0.0"
      },
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/app.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/app.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/",
        "sourceFileName": "app.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _compression = _interopRequireDefault(require(\"compression\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _errorhandler = _interopRequireDefault(require(\"errorhandler\"));\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _morgan = _interopRequireDefault(require(\"morgan\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// @vendors\n// @constants\nconst author = {\n  name: 'Jorge',\n  lastname: 'Osorio'\n}; // app setup\n\nconst app = (0, _express.default)();\napp.use((0, _morgan.default)('common'));\napp.use((0, _compression.default)());\napp.use((0, _cors.default)()); // GET /items?q=:query\n\napp.get('/items', catchUnhandledErrors((req, res) => {\n  let promise;\n\n  if (req.query.q && req.query.q.trim()) {\n    promise = fetch(`${process.env.MELI_SEARCH_SVC}?q=${req.query.q}`).then(response => response.json());\n  } else {\n    promise = Promise.resolve();\n  }\n\n  return promise.then(data => {\n    let categories = [];\n    let items = [];\n\n    if (data) {\n      categories = (data.filters || []).filter(category => category.id === 'category').map(category => category.values.map(value => value.path_from_root.map(path => path.name)).find(() => true)).find(() => true);\n      let results = data.results || [];\n\n      for (let i = 0; i < 4 && i < results.length; i++) {\n        let article = results[i];\n        items.push({\n          id: article.id,\n          title: article.title,\n          price: {\n            currency: article.currency_id,\n            amount: article.price,\n            decimals: 0\n          },\n          picture: article.thumbnail,\n          condition: article.condition,\n          free_shipping: article.shipping && article.shipping.free_shipping === true,\n          location: {\n            state: article.address.state_name,\n            city: article.address.city_name\n          }\n        });\n      }\n    }\n\n    res.send({\n      author,\n      categories,\n      items\n    });\n  });\n})); // GET/items/:id\n\napp.get('/items/:id', catchUnhandledErrors((req, res) => {\n  return fetch(`${process.env.MELI_PRODUCT_DETAIL_SVC}/items/${req.params.id}`).then(async response => {\n    if (response.status !== 200) {\n      return response.text().then(body => {\n        res.status(response.status).send(body);\n      });\n    } else {\n      return response.json().then(article => {\n        return Promise.all([fetch(`${process.env.MELI_PRODUCT_DETAIL_SVC}/categories/${article.category_id}`).then(response => response.json()), fetch(`${process.env.MELI_PRODUCT_DETAIL_SVC}/items/${article.id}/description`).then(response => response.json())]).then(([category, description]) => [article, category, description]);\n      }).then(([article, category, description]) => {\n        let categories = (category.path_from_root || []).map(path => path.name);\n        let item = {\n          id: article.id,\n          title: article.title,\n          price: {\n            currency: article.currency_id,\n            amount: article.price,\n            decimals: 0\n          },\n          picture: article.pictures && article.pictures.length > 0 ? article.pictures[0].url : article.thumbnail,\n          condition: article.condition,\n          free_shipping: article.shipping && article.shipping.free_shipping === true,\n          sold_quantity: article.sold_quantity,\n          description: description.plain_text\n        };\n        res.send({\n          author,\n          categories,\n          item\n        });\n      });\n    }\n  });\n}));\n\nif (process.env.NODE_ENV === 'PROD') {\n  app.use((err, req, res, next) => {\n    console.error(err);\n    res.status(500).send('Error: this project is non intented for production usage');\n  });\n} else {\n  app.use((0, _errorhandler.default)());\n}\n\nfunction catchUnhandledErrors(fn) {\n  return async (req, res, next) => {\n    try {\n      await fn(req, res, next);\n    } catch (err) {\n      await next(err);\n    }\n  };\n}\n\nvar _default = app;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJhdXRob3IiLCJuYW1lIiwibGFzdG5hbWUiLCJhcHAiLCJ1c2UiLCJnZXQiLCJjYXRjaFVuaGFuZGxlZEVycm9ycyIsInJlcSIsInJlcyIsInByb21pc2UiLCJxdWVyeSIsInEiLCJ0cmltIiwiZmV0Y2giLCJwcm9jZXNzIiwiZW52IiwiTUVMSV9TRUFSQ0hfU1ZDIiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsIlByb21pc2UiLCJyZXNvbHZlIiwiZGF0YSIsImNhdGVnb3JpZXMiLCJpdGVtcyIsImZpbHRlcnMiLCJmaWx0ZXIiLCJjYXRlZ29yeSIsImlkIiwibWFwIiwidmFsdWVzIiwidmFsdWUiLCJwYXRoX2Zyb21fcm9vdCIsInBhdGgiLCJmaW5kIiwicmVzdWx0cyIsImkiLCJsZW5ndGgiLCJhcnRpY2xlIiwicHVzaCIsInRpdGxlIiwicHJpY2UiLCJjdXJyZW5jeSIsImN1cnJlbmN5X2lkIiwiYW1vdW50IiwiZGVjaW1hbHMiLCJwaWN0dXJlIiwidGh1bWJuYWlsIiwiY29uZGl0aW9uIiwiZnJlZV9zaGlwcGluZyIsInNoaXBwaW5nIiwibG9jYXRpb24iLCJzdGF0ZSIsImFkZHJlc3MiLCJzdGF0ZV9uYW1lIiwiY2l0eSIsImNpdHlfbmFtZSIsInNlbmQiLCJNRUxJX1BST0RVQ1RfREVUQUlMX1NWQyIsInBhcmFtcyIsInN0YXR1cyIsInRleHQiLCJib2R5IiwiYWxsIiwiY2F0ZWdvcnlfaWQiLCJkZXNjcmlwdGlvbiIsIml0ZW0iLCJwaWN0dXJlcyIsInVybCIsInNvbGRfcXVhbnRpdHkiLCJwbGFpbl90ZXh0IiwiTk9ERV9FTlYiLCJlcnIiLCJuZXh0IiwiY29uc29sZSIsImVycm9yIiwiZm4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUxBO0FBT0E7QUFDQSxNQUFNQSxNQUFNLEdBQUc7QUFDWEMsRUFBQUEsSUFBSSxFQUFFLE9BREs7QUFFWEMsRUFBQUEs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LGFBWGhCO0FBWVBKLFVBQUFBLFdBQVcsRUFBRUEsV0FBVyxDQUFDSztBQVpsQixTQUFYO0FBY0E5RCxRQUFBQSxHQUFHLENBQUNpRCxJQUFKLENBQVM7QUFDTHpELFVBQUFBLE1BREs7QUFFTHVCLFVBQUFBLFVBRks7QUFHTDJDLFVBQUFBO0FBSEssU0FBVDtBQUtILE9BOUJFLENBQVA7QUErQkg7QUFDSixHQXhDRSxDQUFQO0FBeUNILENBMUN5QyxDQUExQzs7QUE0Q0EsSUFBSXBELE9BQU8sQ0FBQ0MsR0FBUixDQUFZd0QsUUFBWixLQUF5QixNQUE3QixFQUFxQztBQUNqQ3BFLEVBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLENBQUNvRSxHQUFELEVBQU1qRSxHQUFOLEVBQVdDLEdBQVgsRUFBZ0JpRSxJQUFoQixLQUF5QjtBQUM3QkMsSUFBQUEsT0FBTyxDQUFDQyxLQUFSLENBQWNILEdBQWQ7QUFDQWhFLElBQUFBLEdBQUcsQ0FBQ29ELE1BQUosQ0FBVyxHQUFYLEVBQWdCSCxJQUFoQixDQUFxQiwwREFBckI7QUFDSCxHQUhEO0FBSUgsQ0FMRCxNQUtPO0FBQ0h0RCxFQUFBQSxHQUFHLENBQUNDLEdBQUosQ0FBUSw0QkFBUjtBQUNIOztBQUVELFNBQVNFLG9CQUFULENBQThCc0UsRUFBOUIsRUFBa0M7QUFDOUIsU0FBTyxPQUFPckUsR0FBUCxFQUFZQyxHQUFaLEVBQWlCaUUsSUFBakIsS0FBMEI7QUFDN0IsUUFBSTtBQUNBLFlBQU1HLEVBQUUsQ0FBQ3JFLEdBQUQsRUFBTUMsR0FBTixFQUFXaUUsSUFBWCxDQUFSO0FBQ0gsS0FGRCxDQUVFLE9BQU9ELEdBQVAsRUFBWTtBQUNWLFlBQU1DLElBQUksQ0FBQ0QsR0FBRCxDQUFWO0FBQ0g7QUFDSixHQU5EO0FBT0g7O2VBRWNyRSxHIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9Kb3JnZS5Pc29yaW8vRGVza3RvcC9tZXJjYWRvX2xpYnJlL21lbGktY2xpZW50L3NlcnZlci9zcmMvIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQHZlbmRvcnNcbmltcG9ydCBjb21wcmVzc2lvbiBmcm9tICdjb21wcmVzc2lvbic7XG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcbmltcG9ydCBlcnJvcmhhbmRsZXIgZnJvbSAnZXJyb3JoYW5kbGVyJztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IG1vcmdhbiBmcm9tICdtb3JnYW4nO1xuXG4vLyBAY29uc3RhbnRzXG5jb25zdCBhdXRob3IgPSB7XG4gICAgbmFtZTogJ0pvcmdlJyxcbiAgICBsYXN0bmFtZTogJ09zb3Jpbydcbn07XG5cbi8vIGFwcCBzZXR1cFxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG5hcHAudXNlKG1vcmdhbignY29tbW9uJykpO1xuYXBwLnVzZShjb21wcmVzc2lvbigpKTtcbmFwcC51c2UoY29ycygpKTtcblxuLy8gR0VUIC9pdGVtcz9xPTpxdWVyeVxuYXBwLmdldCgnL2l0ZW1zJywgY2F0Y2hVbmhhbmRsZWRFcnJvcnMoKHJlcSwgcmVzKSA9PiB7XG4gICAgbGV0IHByb21pc2U7XG4gICAgaWYgKHJlcS5xdWVyeS5xICYmIHJlcS5xdWVyeS5xLnRyaW0oKSkge1xuICAgICAgICBwcm9taXNlID0gZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTUVMSV9TRUFSQ0hfU1ZDfT9xPSR7cmVxLnF1ZXJ5LnF9YCkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmV0dXJuIHByb21pc2VcbiAgICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgICBsZXQgY2F0ZWdvcmllcyA9IFtdO1xuICAgICAgICAgICAgbGV0IGl0ZW1zID0gW107XG4gICAgICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGNhdGVnb3JpZXMgPSAoZGF0YS5maWx0ZXJzIHx8IFtdKVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGNhdGVnb3J5ID0+IGNhdGVnb3J5LmlkID09PSAnY2F0ZWdvcnknKVxuICAgICAgICAgICAgICAgICAgICAubWFwKGNhdGVnb3J5ID0+IGNhdGVnb3J5LnZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCh2YWx1ZSA9PiAgdmFsdWUucGF0aF9mcm9tX3Jvb3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKHBhdGggPT4gcGF0aC5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoKCkgPT4gdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAuZmluZCgoKSA9PiB0cnVlKTtcblxuICAgICAgICAgICAgICAgIGxldCByZXN1bHRzID0gZGF0YS5yZXN1bHRzIHx8IFtdO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNCAmJiBpIDwgcmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYXJ0aWNsZSA9IHJlc3VsdHNbaV07XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGFydGljbGUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogYXJ0aWNsZS50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVuY3k6IGFydGljbGUuY3VycmVuY3lfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBhcnRpY2xlLnByaWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY2ltYWxzOiAwXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGljdHVyZTogYXJ0aWNsZS50aHVtYm5haWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25kaXRpb246IGFydGljbGUuY29uZGl0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgZnJlZV9zaGlwcGluZzogKGFydGljbGUuc2hpcHBpbmcgJiYgYXJ0aWNsZS5zaGlwcGluZy5mcmVlX3NoaXBwaW5nID09PSB0cnVlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IGFydGljbGUuYWRkcmVzcy5zdGF0ZV9uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpdHk6IGFydGljbGUuYWRkcmVzcy5jaXR5X25hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgIGF1dGhvcixcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWVzLFxuICAgICAgICAgICAgICAgIGl0ZW1zXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG59KSk7XG5cbi8vIEdFVC9pdGVtcy86aWRcbmFwcC5nZXQoJy9pdGVtcy86aWQnLCBjYXRjaFVuaGFuZGxlZEVycm9ycygocmVxLCByZXMpID0+IHtcbiAgICByZXR1cm4gZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTUVMSV9QUk9EVUNUX0RFVEFJTF9TVkN9L2l0ZW1zLyR7cmVxLnBhcmFtcy5pZH1gKVxuICAgICAgICAudGhlbihhc3luYyByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGJvZHkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyhyZXNwb25zZS5zdGF0dXMpLnNlbmQoYm9keSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGFydGljbGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5NRUxJX1BST0RVQ1RfREVUQUlMX1NWQ30vY2F0ZWdvcmllcy8ke2FydGljbGUuY2F0ZWdvcnlfaWR9YCkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoKGAke3Byb2Nlc3MuZW52Lk1FTElfUFJPRFVDVF9ERVRBSUxfU1ZDfS9pdGVtcy8ke2FydGljbGUuaWR9L2Rlc2NyaXB0aW9uYCkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKFsgY2F0ZWdvcnksIGRlc2NyaXB0aW9uIF0pID0+IChbIGFydGljbGUsIGNhdGVnb3J5LCBkZXNjcmlwdGlvbiBdKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChbIGFydGljbGUsIGNhdGVnb3J5LCBkZXNjcmlwdGlvbiBdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2F0ZWdvcmllcyA9IChjYXRlZ29yeS5wYXRoX2Zyb21fcm9vdCB8fCBbXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKHBhdGggPT4gcGF0aC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpdGVtID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBhcnRpY2xlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBhcnRpY2xlLnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBhcnRpY2xlLmN1cnJlbmN5X2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGFydGljbGUucHJpY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY2ltYWxzOiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaWN0dXJlOiBhcnRpY2xlLnBpY3R1cmVzICYmIGFydGljbGUucGljdHVyZXMubGVuZ3RoID4gMCA/IGFydGljbGUucGljdHVyZXNbMF0udXJsIDogYXJ0aWNsZS50aHVtYm5haWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uOiBhcnRpY2xlLmNvbmRpdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmVlX3NoaXBwaW5nOiAoYXJ0aWNsZS5zaGlwcGluZyAmJiBhcnRpY2xlLnNoaXBwaW5nLmZyZWVfc2hpcHBpbmcgPT09IHRydWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvbGRfcXVhbnRpdHk6IGFydGljbGUuc29sZF9xdWFudGl0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24ucGxhaW5fdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRob3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xufSkpO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdQUk9EJykge1xuICAgIGFwcC51c2UoKGVyciwgcmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCgnRXJyb3I6IHRoaXMgcHJvamVjdCBpcyBub24gaW50ZW50ZWQgZm9yIHByb2R1Y3Rpb24gdXNhZ2UnKTtcbiAgICB9KTtcbn0gZWxzZSB7XG4gICAgYXBwLnVzZShlcnJvcmhhbmRsZXIoKSk7XG59XG5cbmZ1bmN0aW9uIGNhdGNoVW5oYW5kbGVkRXJyb3JzKGZuKSB7XG4gICAgcmV0dXJuIGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgZm4ocmVxLCByZXMsIG5leHQpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGF3YWl0IG5leHQoZXJyKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFwcDtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "author",
        "name",
        "lastname",
        "app",
        "use",
        "get",
        "catchUnhandledErrors",
        "req",
        "res",
        "promise",
        "query",
        "q",
        "trim",
        "fetch",
        "process",
        "env",
        "MELI_SEARCH_SVC",
        "then",
        "response",
        "json",
        "Promise",
        "resolve",
        "data",
        "categories",
        "items",
        "filters",
        "filter",
        "category",
        "id",
        "map",
        "values",
        "value",
        "path_from_root",
        "path",
        "find",
        "results",
        "i",
        "length",
        "article",
        "push",
        "title",
        "price",
        "currency",
        "currency_id",
        "amount",
        "decimals",
        "picture",
        "thumbnail",
        "condition",
        "free_shipping",
        "shipping",
        "location",
        "state",
        "address",
        "state_name",
        "city",
        "city_name",
        "send",
        "MELI_PRODUCT_DETAIL_SVC",
        "params",
        "status",
        "text",
        "body",
        "all",
        "category_id",
        "description",
        "item",
        "pictures",
        "url",
        "sold_quantity",
        "plain_text",
        "NODE_ENV",
        "err",
        "next",
        "console",
        "error",
        "fn"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/Jorge.Osorio/Desktop/mercado_libre/meli-client/server/src/",
      "sourcesContent": [
        "// @vendors\nimport compression from 'compression';\nimport cors from 'cors';\nimport errorhandler from 'errorhandler';\nimport express from 'express';\nimport morgan from 'morgan';\n\n// @constants\nconst author = {\n    name: 'Jorge',\n    lastname: 'Osorio'\n};\n\n// app setup\nconst app = express();\n\napp.use(morgan('common'));\napp.use(compression());\napp.use(cors());\n\n// GET /items?q=:query\napp.get('/items', catchUnhandledErrors((req, res) => {\n    let promise;\n    if (req.query.q && req.query.q.trim()) {\n        promise = fetch(`${process.env.MELI_SEARCH_SVC}?q=${req.query.q}`).then(response => response.json());\n    } else {\n        promise = Promise.resolve();\n    }\n    return promise\n        .then(data => {\n            let categories = [];\n            let items = [];\n            if (data) {\n                categories = (data.filters || [])\n                    .filter(category => category.id === 'category')\n                    .map(category => category.values\n                        .map(value =>  value.path_from_root\n                            .map(path => path.name)\n                        )\n                        .find(() => true)\n                    )\n                    .find(() => true);\n\n                let results = data.results || [];\n                for (let i = 0; i < 4 && i < results.length; i++) {\n                    let article = results[i];\n                    items.push({\n                        id: article.id,\n                        title: article.title,\n                        price: {\n                            currency: article.currency_id,\n                            amount: article.price,\n                            decimals: 0\n                        },\n                        picture: article.thumbnail,\n                        condition: article.condition,\n                        free_shipping: (article.shipping && article.shipping.free_shipping === true),\n                        location: {\n                            state: article.address.state_name,\n                            city: article.address.city_name\n                        }\n                    });\n                }\n            }\n            res.send({\n                author,\n                categories,\n                items\n            });\n        });\n}));\n\n// GET/items/:id\napp.get('/items/:id', catchUnhandledErrors((req, res) => {\n    return fetch(`${process.env.MELI_PRODUCT_DETAIL_SVC}/items/${req.params.id}`)\n        .then(async response => {\n            if (response.status !== 200) {\n                return response.text()\n                    .then(body => {\n                        res.status(response.status).send(body);\n                    });\n            } else {\n                return response.json()\n                    .then(article => {\n                        return Promise.all([\n                            fetch(`${process.env.MELI_PRODUCT_DETAIL_SVC}/categories/${article.category_id}`).then(response => response.json()),\n                            fetch(`${process.env.MELI_PRODUCT_DETAIL_SVC}/items/${article.id}/description`).then(response => response.json())\n                        ])\n                        .then(([ category, description ]) => ([ article, category, description ]));\n                    })\n                    .then(([ article, category, description ]) => {\n                        let categories = (category.path_from_root || [])\n                            .map(path => path.name);\n                        let item = {\n                            id: article.id,\n                            title: article.title,\n                            price: {\n                                currency: article.currency_id,\n                                amount: article.price,\n                                decimals: 0\n                            },\n                            picture: article.pictures && article.pictures.length > 0 ? article.pictures[0].url : article.thumbnail,\n                            condition: article.condition,\n                            free_shipping: (article.shipping && article.shipping.free_shipping === true),\n                            sold_quantity: article.sold_quantity,\n                            description: description.plain_text\n                        };\n                        res.send({\n                            author,\n                            categories,\n                            item\n                        });\n                    });\n            }\n        });\n}));\n\nif (process.env.NODE_ENV === 'PROD') {\n    app.use((err, req, res, next) => {\n        console.error(err);\n        res.status(500).send('Error: this project is non intented for production usage');\n    });\n} else {\n    app.use(errorhandler());\n}\n\nfunction catchUnhandledErrors(fn) {\n    return async (req, res, next) => {\n        try {\n            await fn(req, res, next);\n        } catch (err) {\n            await next(err);\n        }\n    };\n}\n\nexport default app;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1621529842336
  }
}